(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var c=n(4),s=n.n(c),a=n(2),o=n(1),i=(n(9),n(10),n(11),n(0)),r=function(t){var e=t.posts,n=t.selectedPostId,c=t.onSelectedPostId;return Object(i.jsxs)("div",{className:"PostsList",children:[Object(i.jsx)("h2",{children:"Posts:"}),Object(i.jsx)("ul",{className:"PostsList__list","data-cy":"postList",children:e.map((function(t){return Object(i.jsxs)("li",{className:"PostsList__item",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("b",{children:"[User #".concat(t.userId,"]: ")}),t.title]}),n===t.id?Object(i.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return c(0)},children:"Close"}):Object(i.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return c(t.id)},children:"Open"})]},t.id)}))})]})},l=(n(13),"https://mate.academy/students-api"),u="/posts",j="/comments",b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(l).concat(t),e).then((function(t){if(!t.ok)throw new Error("Error: ".concat(t.status));return t.json()})).catch((function(t){return{Response:"False",Error:"".concat(t)}}))},d=function(t){return b("".concat(j,"?postId=").concat(t))},h=function(){return Math.trunc(1e4*Math.random())},m=function(t){var e=t.postId,n=t.handleUpdate,c=Object(o.useState)(h()),s=Object(a.a)(c,2),r=s[0],l=s[1],u=Object(o.useState)(""),d=Object(a.a)(u,2),m=d[0],O=d[1],p=Object(o.useState)(""),f=Object(a.a)(p,2),x=f[0],v=f[1],_=Object(o.useState)(""),N=Object(a.a)(_,2),S=N[0],y=N[1];return Object(i.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){var c;t.preventDefault(),(c={id:r,postId:e,name:m,email:x,body:S},b(j,{method:"POST",headers:{"content-type":"application/json; charset=utf-8"},body:JSON.stringify(c)})).then((function(){return n(!0)})),l(h()),O(""),v(""),y("")},children:[Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:m,onChange:function(t){return O(t.target.value)}})}),Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:x,onChange:function(t){return v(t.target.value)}})}),Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:S,onChange:function(t){return y(t.target.value)}})}),Object(i.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})},O=(n(14),function(t){var e=t?"".concat(u,"?userId=").concat(t):"".concat(u);return b(e)}),p=function(t){return b("".concat(u,"/").concat(t))},f=(n(15),function(){return Object(i.jsx)("div",{className:"Loader",children:Object(i.jsx)("div",{className:"Loader__content"})})}),x=function(t,e,n,c){return n(!0),t(e).then((function(t){return"Error"in t?Promise.reject(t.Error):Promise.resolve(t)})).catch(c).finally((function(){return n(!1)}))},v=function(t){var e=t.postId,n=Object(o.useState)(null),c=Object(a.a)(n,2),s=c[0],r=c[1],l=Object(o.useState)(!1),u=Object(a.a)(l,2),h=u[0],O=u[1],v=Object(o.useState)(""),_=Object(a.a)(v,2),N=_[0],S=_[1],y=Object(o.useState)([]),P=Object(a.a)(y,2),g=P[0],w=P[1],C=Object(o.useState)(!1),E=Object(a.a)(C,2),I=E[0],L=E[1],D=Object(o.useState)(!1),k=Object(a.a)(D,2),A=k[0],F=k[1];Object(o.useEffect)((function(){x(p,e,O,S).then(r)}),[e]),Object(o.useEffect)((function(){x(d,e,O,S).then(w),F(!1)}),[e,A]);var G=function(t){(function(t){return b("".concat(j,"/").concat(t),{method:"DELETE"})})(t).then((function(t){return console.log(t)})),w((function(e){return e.filter((function(e){return e.id!==t}))}))};return Object(i.jsxs)(i.Fragment,{children:[s&&!N&&Object(i.jsxs)("div",{className:"PostDetails",children:[Object(i.jsx)("h2",{children:"Post details:"}),Object(i.jsx)("section",{className:"PostDetails__post","data-cy":"postDetails",children:Object(i.jsx)("p",{children:s.title})}),h?Object(i.jsx)(f,{}):Object(i.jsxs)("section",{className:"PostDetails__comments",children:[Object(i.jsx)("button",{type:"button",className:"button",onClick:function(){return L((function(t){return!t}))},children:"".concat(I?"Show":"Hide"," ").concat(g.length)}),!I&&Object(i.jsx)("ul",{className:"PostDetails__list","data-cy":"postList",children:g.map((function(t){return Object(i.jsxs)("li",{className:"PostDetails__list-item",children:[Object(i.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return G(t.id)},children:"X"}),Object(i.jsx)("p",{children:t.body})]},t.id)}))})]}),Object(i.jsx)("section",{children:Object(i.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(i.jsx)(m,{postId:e,handleUpdate:F})})})]}),h&&Object(i.jsx)(f,{}),N&&Object(i.jsx)("div",{children:"Something went wrong... ".concat(N)})]})},_=function(){var t=Object(o.useState)([]),e=Object(a.a)(t,2),n=e[0],c=e[1],s=Object(o.useState)(0),l=Object(a.a)(s,2),u=l[0],j=l[1],b=Object(o.useState)(!1),d=Object(a.a)(b,2),h=d[0],m=d[1],p=Object(o.useState)(""),_=Object(a.a)(p,2),N=_[0],S=_[1],y=Object(o.useState)(0),P=Object(a.a)(y,2),g=P[0],w=P[1];return Object(o.useEffect)((function(){x(O,u,m,S).then(c)}),[u]),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("header",{className:"App__header",children:Object(i.jsxs)("label",{children:["Select a user: \xa0",Object(i.jsxs)("select",{className:"App__user-selector",value:u,onChange:function(t){return j(Number(t.target.value))},children:[Object(i.jsx)("option",{value:"0",children:"All users"}),Object(i.jsx)("option",{value:"1",children:"Leanne Graham"}),Object(i.jsx)("option",{value:"2",children:"Ervin Howell"}),Object(i.jsx)("option",{value:"3",children:"Clementine Bauch"}),Object(i.jsx)("option",{value:"4",children:"Patricia Lebsack"}),Object(i.jsx)("option",{value:"5",children:"Chelsey Dietrich"}),Object(i.jsx)("option",{value:"6",children:"Mrs. Dennis Schulist"}),Object(i.jsx)("option",{value:"7",children:"Kurtis Weissnat"}),Object(i.jsx)("option",{value:"8",children:"Nicholas Runolfsdottir V"}),Object(i.jsx)("option",{value:"9",children:"Glenna Reichert"}),Object(i.jsx)("option",{value:"10",children:"Leanne Graham"})]})]})}),!h&&!N&&Object(i.jsxs)("main",{className:"App__main",children:[Object(i.jsx)("div",{className:"App__sidebar",children:Object(i.jsx)(r,{posts:n,selectedPostId:g,onSelectedPostId:w})}),0!==g&&Object(i.jsx)("div",{className:"App__content",children:Object(i.jsx)(v,{postId:g})})]}),h&&Object(i.jsx)(f,{}),N&&Object(i.jsx)("div",{children:"Something went wrong... ".concat(N)})]})};s.a.render(Object(i.jsx)(_,{}),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.10ed85ce.chunk.js.map