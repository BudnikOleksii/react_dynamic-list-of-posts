(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(4),s=n.n(c),a=n(2),o=n(1),i=(n(9),n(10),n(11),n(0)),r=function(e){var t=e.posts,n=e.selectedPostId,c=e.onSelectedPostId;return Object(i.jsxs)("div",{className:"PostsList",children:[Object(i.jsx)("h2",{children:"Posts:"}),Object(i.jsx)("ul",{className:"PostsList__list","data-cy":"postList",children:t.map((function(e){return Object(i.jsxs)("li",{className:"PostsList__item",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("b",{children:"[User #".concat(e.userId,"]: ")}),e.title]}),n===e.id?Object(i.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return c(0)},children:"Close"}):Object(i.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return c(e.id)},children:"Open"})]},e.id)}))})]})},l=(n(13),"https://mate.academy/students-api"),u="/posts",j="/comments",d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(l).concat(e),t).then((function(e){if(!e.ok)throw new Error("Error: ".concat(e.status));return e.json()})).catch((function(e){return{Response:"False",Error:"".concat(e)}}))},b=function(e){return d("".concat(j,"?postId=").concat(e))},h=function(e){var t=e.postId,n=e.handleUpdate,c=Object(o.useState)(""),s=Object(a.a)(c,2),r=s[0],l=s[1],u=Object(o.useState)(""),b=Object(a.a)(u,2),h=b[0],m=b[1],O=Object(o.useState)(""),p=Object(a.a)(O,2),f=p[0],x=p[1];return Object(i.jsxs)("form",{className:"NewCommentForm",onSubmit:function(e){var c;e.preventDefault(),(c={id:Math.trunc(1e4*Math.random()),postId:t,name:r,email:h,body:f},d(j,{method:"POST",headers:{"content-type":"application/json; charset=utf-8"},body:JSON.stringify(c)})).then((function(){return n(!0)})),l(""),m(""),x("")},children:[Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:r,onChange:function(e){return l(e.target.value)}})}),Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:h,onChange:function(e){return m(e.target.value)}})}),Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:f,onChange:function(e){return x(e.target.value)}})}),Object(i.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})},m=(n(14),function(e){var t=e?"".concat(u,"?userId=").concat(e):"".concat(u);return d(t)}),O=function(e){return d("".concat(u,"/").concat(e))},p=(n(15),function(){return Object(i.jsx)("div",{className:"Loader",children:Object(i.jsx)("div",{className:"Loader__content"})})}),f=function(e,t,n,c){return n(!0),e(t).then((function(e){return"Error"in e?Promise.reject(e.Error):Promise.resolve(e)})).catch(c).finally((function(){return n(!1)}))},x=function(e){var t=e.postId,n=Object(o.useState)(null),c=Object(a.a)(n,2),s=c[0],r=c[1],l=Object(o.useState)(!1),u=Object(a.a)(l,2),m=u[0],x=u[1],v=Object(o.useState)(""),_=Object(a.a)(v,2),N=_[0],S=_[1],y=Object(o.useState)([]),P=Object(a.a)(y,2),g=P[0],w=P[1],C=Object(o.useState)(!1),E=Object(a.a)(C,2),I=E[0],L=E[1],D=Object(o.useState)(!1),k=Object(a.a)(D,2),A=k[0],F=k[1];Object(o.useEffect)((function(){f(O,t,x,S).then(r)}),[t]),Object(o.useEffect)((function(){f(b,t,x,S).then(w),F(!1)}),[t,A]);var G=function(e){(function(e){return d("".concat(j,"/").concat(e),{method:"DELETE"})})(e).then((function(e){return console.log(e)})),F(!0)};return Object(i.jsxs)(i.Fragment,{children:[s&&!N&&Object(i.jsxs)("div",{className:"PostDetails",children:[Object(i.jsx)("h2",{children:"Post details:"}),Object(i.jsx)("section",{className:"PostDetails__post","data-cy":"postDetails",children:Object(i.jsx)("p",{children:s.title})}),m?Object(i.jsx)(p,{}):Object(i.jsxs)("section",{className:"PostDetails__comments",children:[Object(i.jsx)("button",{type:"button",className:"button",onClick:function(){return L((function(e){return!e}))},children:"".concat(I?"Show":"Hide"," ").concat(g.length)}),!I&&Object(i.jsx)("ul",{className:"PostDetails__list","data-cy":"postList",children:g.map((function(e){return Object(i.jsxs)("li",{className:"PostDetails__list-item",children:[Object(i.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return G(e.id)},children:"X"}),Object(i.jsx)("p",{children:e.body})]},e.id)}))})]}),Object(i.jsx)("section",{children:Object(i.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(i.jsx)(h,{postId:t,handleUpdate:F})})})]}),m&&Object(i.jsx)(p,{}),N&&Object(i.jsx)("div",{children:"Something went wrong... ".concat(N)})]})},v=function(){var e=Object(o.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],s=Object(o.useState)(0),l=Object(a.a)(s,2),u=l[0],j=l[1],d=Object(o.useState)(!1),b=Object(a.a)(d,2),h=b[0],O=b[1],v=Object(o.useState)(""),_=Object(a.a)(v,2),N=_[0],S=_[1],y=Object(o.useState)(0),P=Object(a.a)(y,2),g=P[0],w=P[1];return Object(o.useEffect)((function(){f(m,u,O,S).then(c)}),[u]),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("header",{className:"App__header",children:Object(i.jsxs)("label",{children:["Select a user: \xa0",Object(i.jsxs)("select",{className:"App__user-selector",value:u,onChange:function(e){return j(Number(e.target.value))},children:[Object(i.jsx)("option",{value:"0",children:"All users"}),Object(i.jsx)("option",{value:"1",children:"Leanne Graham"}),Object(i.jsx)("option",{value:"2",children:"Ervin Howell"}),Object(i.jsx)("option",{value:"3",children:"Clementine Bauch"}),Object(i.jsx)("option",{value:"4",children:"Patricia Lebsack"}),Object(i.jsx)("option",{value:"5",children:"Chelsey Dietrich"}),Object(i.jsx)("option",{value:"6",children:"Mrs. Dennis Schulist"}),Object(i.jsx)("option",{value:"7",children:"Kurtis Weissnat"}),Object(i.jsx)("option",{value:"8",children:"Nicholas Runolfsdottir V"}),Object(i.jsx)("option",{value:"9",children:"Glenna Reichert"}),Object(i.jsx)("option",{value:"10",children:"Leanne Graham"})]})]})}),!h&&!N&&Object(i.jsxs)("main",{className:"App__main",children:[Object(i.jsx)("div",{className:"App__sidebar",children:Object(i.jsx)(r,{posts:n,selectedPostId:g,onSelectedPostId:w})}),0!==g&&Object(i.jsx)("div",{className:"App__content",children:Object(i.jsx)(x,{postId:g})})]}),h&&Object(i.jsx)(p,{}),N&&Object(i.jsx)("div",{children:"Something went wrong... ".concat(N)})]})};s.a.render(Object(i.jsx)(v,{}),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.dce86da0.chunk.js.map